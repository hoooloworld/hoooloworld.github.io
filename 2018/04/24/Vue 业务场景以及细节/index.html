<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Vue," />










<meta name="description" content="前言在公司开启新的业务线，并且是需要以新的前端框架技术 Vue，去完成这项工作的时候，我很开心能做为其中的开拓者之一。在此之前，我并没有多少 Vue 的开发经验，也仅仅是停留在学习阶段，而且公司一直采用的前端框架还是 jQuery，所以公司也没 Vue 框架开发经验沉淀。外面的世界日新月异，对于新技术也是一直感兴趣，一直希望有机会能用上新的框架去开发项目。很开心能有这个机会，虽然任重而道远，一切从">
<meta name="keywords" content="Vue">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue 常见业务场景以及细节心得">
<meta property="og:url" content="http://yoursite.com/2018/04/24/Vue 业务场景以及细节/index.html">
<meta property="og:site_name" content="乌托邦">
<meta property="og:description" content="前言在公司开启新的业务线，并且是需要以新的前端框架技术 Vue，去完成这项工作的时候，我很开心能做为其中的开拓者之一。在此之前，我并没有多少 Vue 的开发经验，也仅仅是停留在学习阶段，而且公司一直采用的前端框架还是 jQuery，所以公司也没 Vue 框架开发经验沉淀。外面的世界日新月异，对于新技术也是一直感兴趣，一直希望有机会能用上新的框架去开发项目。很开心能有这个机会，虽然任重而道远，一切从">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/images/vue-manage.png">
<meta property="og:updated_time" content="2018-04-24T12:45:42.578Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Vue 常见业务场景以及细节心得">
<meta name="twitter:description" content="前言在公司开启新的业务线，并且是需要以新的前端框架技术 Vue，去完成这项工作的时候，我很开心能做为其中的开拓者之一。在此之前，我并没有多少 Vue 的开发经验，也仅仅是停留在学习阶段，而且公司一直采用的前端框架还是 jQuery，所以公司也没 Vue 框架开发经验沉淀。外面的世界日新月异，对于新技术也是一直感兴趣，一直希望有机会能用上新的框架去开发项目。很开心能有这个机会，虽然任重而道远，一切从">
<meta name="twitter:image" content="http://yoursite.com/images/vue-manage.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/04/24/Vue 业务场景以及细节/"/>





  <title>Vue 常见业务场景以及细节心得 | 乌托邦</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">乌托邦</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/24/Vue 业务场景以及细节/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Oliver Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/icon.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乌托邦">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Vue 常见业务场景以及细节心得</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-24T00:21:14+08:00">
                2018-04-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>在公司开启新的业务线，并且是需要以新的前端框架技术 Vue，去完成这项工作的时候，我很开心能做为其中的开拓者之一。在此之前，我并没有多少 Vue 的开发经验，也仅仅是停留在学习阶段，而且公司一直采用的前端框架还是 jQuery，所以公司也没 Vue 框架开发经验沉淀。外面的世界日新月异，对于新技术也是一直感兴趣，一直希望有机会能用上新的框架去开发项目。很开心能有这个机会，虽然任重而道远，一切从零开始摸索。</p>
<p>但是，何为“开拓者”！这就是！</p>
<a id="more"></a>
<h3 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h3><p>Vue 是当今最火的前端框架之一，这就不用多说了。这里就只留两点建议给刚上手的童鞋：</p>
<ol>
<li><p>怎么去学习：</p>
<p>我建议可以直接去看 <a href="https://cn.vuejs.org/" target="_blank" rel="noopener">Vue 官方文档</a>，官方文档写得挺好的，而且学习曲线还是挺平滑的。这也是 Vue 的一个优点。</p>
</li>
<li><p>要注意什么：</p>
<p>要理解其框架思想。上一代的以 jQuery 为代表的框架的思想是直接操作 DOM，更新视图。现在主流以 Vue、React 为代表的前端框架，最大的特点就是<strong>数据驱动</strong>，直接操作数据，视图更新的工作留给框架去做。两种思想是截然不同的，如果之前是接触 jQuery 比较多，这里就需要注意，不要被 jQuery 的开发思维给影响到，必要时可以将之前的思维抛弃掉，以新的思维方式去接受并且开发。</p>
</li>
</ol>
<p>这里就不多说如何上手 Vue 了，直接去官方文档开启 Vue 的学习旅程吧。在这主要分享一下，在这个项目过程中，所遇到的典型业务场景，解决方案，还有一些心得，希望能对你们有用。</p>
<h3 id="常见的业务场景"><a href="#常见的业务场景" class="headerlink" title="常见的业务场景"></a>常见的业务场景</h3><h4 id="1-全局注册与局部注册的抉择"><a href="#1-全局注册与局部注册的抉择" class="headerlink" title="1. 全局注册与局部注册的抉择"></a>1. 全局注册与局部注册的抉择</h4><p>基于 Vue 的开发，接触最多的便是组件化开发了，这也是框架解决了的前端开发痛点之一。在 Vue 中，组件注册分为<strong>全局注册</strong>和<strong>局部注册</strong>，两者的区别以及常见的业务场景有哪些呢：</p>
<ul>
<li><p>全局注册</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&apos;component-name&apos;, &#123;</span><br><span class="line">  // ... 选项 ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>一个网页，一般由基础功能块，再由盒子模型合理布局之后，便组成了我们常见的网页。这些基础性功能块，再由一些基础元素组成，比如 <code>button</code> 标签、<code>input</code> 标签等等。这些大家应该都了解。</p>
<p>在这基础上，整个页面基本遵守页面设计统一的原则，基础元素一般要设计统一，但又要在多个地方复用，所以此时就是全局组件的发挥之地。我们将多处需要复用的元素，封装成全局组件，功能与设计统一维护，而需要用到的地方，直接调用就好了，无需二次开发。这就是全局组件的便利之处。</p>
</li>
<li><p>局部注册</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var ComponentA = &#123; /* ... */ &#125;</span><br><span class="line">new Vue(&#123;</span><br><span class="line">  el: &apos;#app&apos;</span><br><span class="line">  components: &#123;</span><br><span class="line">    &apos;component-a&apos;: ComponentA</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>一张网页，一般对应着一个 Vue 实例，也就是根组件，最外层的组件。在这基础上，内部我们一般会以功能划分为若干个模块，比如头部，内容区等等。这些模块，都是一个个独立的组件。这就是局部注册的业务场景，虽然牺牲一定复用性（但其在内部组件一样可以多处复用），但是可以独立维护内部功能以及独立的业务逻辑。这样剥离出来，代码以及业务逻辑都很清晰，而不是全部都冗杂在外层组件中。</p>
</li>
</ul>
<p>所以在两者的选择上，全局组件更偏向于搭建基础组件，而局部组件偏向于业务模块，根据业务划分不同的组件。</p>
<p><strong>总结</strong>：</p>
<ul>
<li>全局组件最大的特点就是复用，要发挥这个特点才注册成全局，不然会造成一定的浪费。最常见的业务场景就是基础组件，比如 <code>button</code>、<code>input</code> 等等。市面上也有很多不错的组件库，比如 <a href="https://www.iviewui.com/" target="_blank" rel="noopener">iView</a> 。</li>
<li>局部组件最大的特点就是相关业务逻辑独立维护，降低耦合度以及提高业务的清晰度。</li>
</ul>
<h4 id="2-怎么去把握业务边界"><a href="#2-怎么去把握业务边界" class="headerlink" title="2. 怎么去把握业务边界"></a>2. 怎么去把握业务边界</h4><p>上面提到，我们在组件化开发的时候，需要根据功能去划分模块。模块的划分，过细或者不够具体，都会在开发过程中造成一定的影响。所以，如何去划分模块，或者说如何把握好一个模块的功能边界，明确其业务范围，也是需要我们去注意的。通常，我们可以从以下几个问题去思考：</p>
<ul>
<li>划分出来的模块，它需要做什么？不需要做什么？</li>
<li>它向外暴露什么？同时向外接受什么？</li>
</ul>
<p>考虑好这几个问题之后，模块结构基本也清晰了。</p>
<p><strong>1. 这个需要做什么 ，不需要做什么</strong></p>
<p>首先，我们从这两个问题入手思考，这两个问题也是为了让我们确定这个模块的功能边界。比如，我们设计一个弹窗组件，我们从这两个问题出发思考，它需要做什么，弹出、显示内容、关闭，没了。显示什么内容呢，它不需要关心，这就是它不需要做的事情。从这两个问题出发，去把握好模块的功能边界，划分出来的模块结构也会比较清晰。</p>
<p><strong>2. 向外暴露什么，向外接受什么</strong></p>
<p>这其实是考虑如何进行数据通信了。在 Vue 中，最常见的就是父子之间的通信了，父组件通过 props 传递数据给子组件，子组件通过 emit 触发自定义事件发送信息给父组件。这就是父子之间的通信过程。</p>
<p>但是有一个点容易被忽略，当 props 是一个引用类型的时候，这个时候传递就不是单向数据流了。因为子组件拿到的是一个引用，它可以修改这个引用对象上的值，父组件的数据也会随之相应地变化了，所以这就变成了双向数据流。</p>
<p>这是不应该的，子组件不应该直接修改父组件的数据的，而且当你这么做的时候，Vue 也会提示你不要这样操作。所以在 props 中一般只传递基本类型的值，避免传递引用类型的值，同时最好在定义 props 的时候，写好类型和默认值，校验一次。</p>
<p>但有些场景下，传递引用类型会方便一些。我个人分为两种情况：</p>
<ol>
<li>当这个组件是全局复用时，比如 input 、button 等等这些全局复用的自定义组件，就只传递基本类型。</li>
<li>当这个组件是某个功能模块内部使用，比如局部注册的组件，因为它局限于某个模块下，并且数据量大的时候，传递引用类型就方便一点。但还是要记得不能直接修改引用对象的值。若需要有对这个引用某个值进行操作，可以将这个值赋予 data 或者 computed 属性，再去相对应的操作。（这也是为了将数据修改约束在顶层组件，这样做的好处是数据流清晰，只有一处修改数据的地方。出问题追溯数据也比较好追。因为框架是基于数据驱动，要面对的问题都是因为数据，所以要对数据的结构、来源，去向以及修改做好约束，或者管理好数据。）</li>
</ol>
<p>这是向外接受要思考的方向。</p>
<p>向外暴露呢，或者说向外提供什么呢？</p>
<p>组件化开发，内部高度自治，所以一个逻辑到了某个组件，组件内部处理完之后，需要向外部告知。此时需要注意一个原则：</p>
<blockquote>
<p>应该向外告知，我发生了什么，而不能是，你去干什么？</p>
</blockquote>
<p>可能有点拗口，但是你仔细思考一下就理解了，后者其实是决定了外部行为，这样就存在了耦合，这样的设计是不合理的。前者只是告知外部它自己发生了什么，它不管外部是根据这个信息，进行什么响应，这样的设计才是合理的。虽然这句话听起来，看似只是语义上的区别而已。</p>
<h4 id="3-数据配置"><a href="#3-数据配置" class="headerlink" title="3. 数据配置"></a>3. 数据配置</h4><p>前面也提到，对数据的结构、来源，去向以及修改做好约束，或者管理好数据。因为数据驱动，我们要高度关注数据，合理设计数据结构以及管理数据。<strong>数据配置</strong>是我在项目中用得最多的一种数据管理方式，其实在很多框架细节上，随处可见。</p>
<p>何为<strong>数据配置</strong>？</p>
<p>举个栗子，最常见的业务场景，后台管理。</p>
<p><img src="/images/vue-manage.png" alt="简单后台管理页面"></p>
<p>代码结构如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"manage"</span> <span class="attr">class</span>=<span class="string">"manage"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sidebar"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"menu"</span> <span class="attr">v-for</span>=<span class="string">"menu in menuDef"</span> <span class="attr">:key</span>=<span class="string">"menu.type"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"menu-title"</span>&gt;</span>&#123;&#123; menu.name &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"sub-menu"</span> <span class="attr">v-for</span>=<span class="string">"submenu in menu.submenu"</span> <span class="attr">:key</span>=<span class="string">"submenu.type"</span>&gt;</span>&#123;&#123; submenu.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span>内容区<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    // 二级菜单</span></span><br><span class="line"><span class="undefined">    var subServer = [</span></span><br><span class="line"><span class="undefined">        &#123; type: 'manage', name: '管理服务', extClass: 'server-manage' &#125;,</span></span><br><span class="line"><span class="undefined">        &#123; type: 'list', name: '服务列表', extClass: 'server-list' &#125;,</span></span><br><span class="line"><span class="undefined">    ];</span></span><br><span class="line"><span class="undefined">    // 二级菜单</span></span><br><span class="line"><span class="undefined">    var subNews = [</span></span><br><span class="line"><span class="undefined">        &#123; type: 'internation', name: '国际新闻', extClass: 'i-news' &#125;,</span></span><br><span class="line"><span class="undefined">        &#123; type: 'home', name: '国内新闻', extClass: 'home-news' &#125;,</span></span><br><span class="line"><span class="undefined">    ];</span></span><br><span class="line"><span class="undefined">    // 一级菜单</span></span><br><span class="line"><span class="undefined">    var menu = [</span></span><br><span class="line"><span class="undefined">        &#123; type: 'server', name: '服务', extClass: 'server', submenu: subServer &#125;,</span></span><br><span class="line"><span class="undefined">        &#123; type: 'news', name: '新闻', extClass: 'news', submenu: subNews &#125;</span></span><br><span class="line"><span class="undefined">    ];</span></span><br><span class="line"><span class="undefined">    // 根实例</span></span><br><span class="line"><span class="undefined">    var manage = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">        el: '#manage',</span></span><br><span class="line"><span class="undefined">        data: &#123;</span></span><br><span class="line"><span class="undefined">            menuDef: menu</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这是一个简单的后台管理页面，左侧面板有一系列的菜单项，右侧内容区基于左侧菜单切换而变化。左侧菜单结构一致，只不过是数据不同而已。在这个例子也可以看出：</p>
<ul>
<li>页面结构与数据的关系。页面结构只是数据的外层表现而已，并且是基于数据结构去变化的，</li>
<li>所以再抽象一点，将数据从页面结构抽象出来，便就是这个页面所需要的数据结构了。</li>
<li>如果我们将剥离出来的数据结构，单独维护，这便是我所说的<strong>数据配置</strong>了。</li>
</ul>
<p>数据配置有什么好处呢？</p>
<ul>
<li>只关注数据结构，不用关注页面结构，即使增删菜单项、或者修改结构层级，我也只需在数据这一层，进行调整就好了，不需要再进入逻辑层或者页面层进行变动。</li>
<li>这种方式对于后期维护相当友好。不管是扩展还是维护，都是相当的便利的。记得在我这个项目开发过程中，后台管理页面有过一定的变动，在 PM 跟我讲完需要变动的地方的时候，我也基本都改好了…因为我只需更换数据层就好了，就比方我修改一个配置文档而已，只要文档标注写清楚了，谁来改都是一样的便利。</li>
</ul>
<p>适合的场景：</p>
<ul>
<li>相似的结构，只是数据有所不同。</li>
</ul>
<ul>
<li>这适合的场景也是比较广泛的，基本也可以搭配组件复用去实现的。</li>
</ul>
<p>上面说到，右侧内容区是基于左侧菜单切换而变化的。这个实现是基于<strong>路由</strong>实现的，Vue 也提供了 <code>vue-router</code> 官方路由库，具体的文档也是可以直接去看官方文档。在这里想是，对于路由的管理，同样也可以运用<strong>数据配置</strong>的方式，统一在一处管理路由配置项，还可以与其他数据结构嵌套使用。比如接上上面的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">// 路由配置</span><br><span class="line">// compons.serviceManage、compons.serviceList 就是内容区的内容组件</span><br><span class="line">var serviceRoutes = &#123;</span><br><span class="line">		serviceManage: &#123; path: &apos;/serviceManage&apos;, name: &apos;serviceManage&apos;, component: compons.serviceManage &#125;,</span><br><span class="line">		serviceList: &#123; path: &apos;/serviceList&apos;, name: &apos;serviceList&apos;, component: compons.serviceList&#125;</span><br><span class="line">&#125;;</span><br><span class="line">// ...</span><br><span class="line"></span><br><span class="line">// 菜单项配置</span><br><span class="line">// 二级菜单</span><br><span class="line">var subServer = [</span><br><span class="line">	&#123; type: &apos;manage&apos;, name: &apos;管理服务&apos;, extClass: &apos;server-manage&apos;, router: serviceRoutes.serviceManage &#125;,</span><br><span class="line">	&#123; type: &apos;list&apos;, name: &apos;服务列表&apos;, extClass: &apos;server-list&apos;, router: serviceRoutes.serviceList &#125;,</span><br><span class="line">];</span><br><span class="line">// ....</span><br><span class="line"></span><br><span class="line">// 如何使用</span><br><span class="line">// 上面配置的路由配置对象全部放进来，下面会循环创建路由对象。</span><br><span class="line">var routerList = [serviceRoutes, articleRoutes, ...];</span><br><span class="line">// 路由配置，循环路由配置</span><br><span class="line">var router = [];</span><br><span class="line">routerList.forEach(router =&gt; &#123;</span><br><span class="line">   router.push(router); </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 根实例</span><br><span class="line">var manage = new Vue(&#123;</span><br><span class="line">	router,				// 将配置好的路由对象传进来</span><br><span class="line">	el: &apos;#manage&apos;,</span><br><span class="line">	data: &#123;</span><br><span class="line">		menuDef: menu</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>后期在维护这一块的时候，只需要对数据结构的配置以及路由的配置维护就好了。</p>
<h4 id="4-如何优雅地搭配-jQuery-使用"><a href="#4-如何优雅地搭配-jQuery-使用" class="headerlink" title="4. 如何优雅地搭配 jQuery 使用"></a>4. 如何优雅地搭配 jQuery 使用</h4><p>在 Vue 的开发过程中，大多时候并不需要你去亲自去操作 DOM，你只要关注数据层，通过数据驱动，由框架去完成视图的更新。</p>
<p>但在某些特殊场景下，你切确需要去进行一些底层的 DOM 操作，比如 hover 某个模块出现 tip，或者 hover 某个结构出现工具栏。这种业务场景，你可能想到的是，在模块内部处理 <code>mouseenter</code> 和 <code>mouseleave</code> 事件的时候，进行这块逻辑的处理。这是比较典型的 JQuery 思维去处理这个问题，这样处理方案有很多缺点：</p>
<ul>
<li>无法复用，你所做的处理，只是限定在某个模块下的，别的地方无法直接复用。</li>
<li>耦合高，因为这个业务本身就可以剥离出去的，成为一个单独的组件维护了。如果还夹杂在其他模块内部，会造成模块内部逻辑以及结构不清晰。</li>
<li>后期维护难。</li>
</ul>
<p>如果是用 Vue 的方式去实现呢？</p>
<p>Vue 提供了一个自定义指令 (directive) 的接口给我们，这种方式就很好地解决了这个业务场景下的问题。在 Vue 里面，它不建议你直接在实例内部中进行一些 DOM 操作，如果你需要进行一些底层 DOM 操作，你可以将它们抽离到自定义指令中来。而在需要用到的时候，我直接使用就好了，完美解决上面的处理方案存在的问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">// jQuery 的方式，错误的方式</span><br><span class="line">&lt;div id=&apos;app&apos; @mouseenter=&apos;handleMouseEnter&apos; @mouseleave=&apos;handleMouseLeave&apos;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div id=&apos;tip&apos;&gt;&lt;/div&gt;</span><br><span class="line">var app = new Vue(&#123;</span><br><span class="line">    el: &apos;#app&apos;,</span><br><span class="line">    data: &#123;&#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        handleMouseEnter: function () &#123;</span><br><span class="line">            document.querySelector(&apos;#tip&apos;).style.display = &apos;block&apos;;</span><br><span class="line">        &#125;,</span><br><span class="line">        handleMouseLeave: function () &#123;</span><br><span class="line">            document.querySelector(&apos;#tip&apos;).style.display = &apos;none&apos;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// Vue 的方式，正确的选择</span><br><span class="line">&lt;div id=&apos;app&apos; v-tip=&apos;&#123; text: tipText &#125;&apos;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">Vue.directive(&apos;tip&apos;, &#123;</span><br><span class="line">    inserted: function(el, binding) &#123;</span><br><span class="line">		var tipDom = document.querySelector(&apos;#tip&apos;);</span><br><span class="line">		if(tipDom) &#123;</span><br><span class="line">            // 如果已经存在，不需要创建 DOM</span><br><span class="line">            // do something</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			// 如果不存在，创建 DOM</span><br><span class="line">            tipDom = document.createElement(&apos;div&apos;);</span><br><span class="line">            tipDom.setAttribute(&apos;id&apos;, &apos;tip&apos;);</span><br><span class="line">            document.body.appendChild(tip);</span><br><span class="line">            // do something</span><br><span class="line">		&#125;</span><br><span class="line">		// 为绑定该指令的元素注册事件</span><br><span class="line">		el.addEventListener(&apos;mouseenter&apos;, function() &#123;</span><br><span class="line">            // do something</span><br><span class="line">		&#125;);</span><br><span class="line">		el.addEventListener(&apos;mouseleave&apos;, function() &#123;</span><br><span class="line">            // do something</span><br><span class="line">		&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var app = new Vue(&#123;</span><br><span class="line">    el: &apos;#app&apos;,</span><br><span class="line">    data: &#123;</span><br><span class="line">        tipText: &apos;Hello, world!&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这便是这种业务场景下，Vue 的优雅实现。很好地将业务逻辑剥离出来成自定义指令，一处实现，多处复用。代码逻辑清晰，耦合度低，后期好维护等等优点铺面而来。简直如浴春风啊~</p>
<p>具体相关的自定义指令的知识点以及运用，大家可以去查看<a href="https://cn.vuejs.org/v2/guide/custom-directive.html" target="_blank" rel="noopener">自定义指令</a>的官方文档。</p>
<h3 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h3><p>在开发过程中，还有很多细节一点的场景，比如如何结合 Vue 优雅地实现动画，父子通信，兄弟通信需要注意的细节等等。这些细节就相对琐碎了一点，一一讲起来篇幅也会太长了。后期有读者遇到相关问题，也可以再另起一篇幅，再给大家唠嗑唠嗑~</p>
<p>这篇就到这了。</p>
<p>Hello，world！</p>
<p>### </p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Vue/" rel="tag"># Vue</a>
          
        </div>
      

      
      
      

      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/icon.jpeg"
                alt="Oliver Chen" />
            
              <p class="site-author-name" itemprop="name">Oliver Chen</p>
              <p class="site-description motion-element" itemprop="description">嘿，又是美好的一天。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue"><span class="nav-number">2.</span> <span class="nav-text">Vue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常见的业务场景"><span class="nav-number">3.</span> <span class="nav-text">常见的业务场景</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-全局注册与局部注册的抉择"><span class="nav-number">3.1.</span> <span class="nav-text">1. 全局注册与局部注册的抉择</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-怎么去把握业务边界"><span class="nav-number">3.2.</span> <span class="nav-text">2. 怎么去把握业务边界</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-数据配置"><span class="nav-number">3.3.</span> <span class="nav-text">3. 数据配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-如何优雅地搭配-jQuery-使用"><span class="nav-number">3.4.</span> <span class="nav-text">4. 如何优雅地搭配 jQuery 使用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#结尾"><span class="nav-number">4.</span> <span class="nav-text">结尾</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Oliver Chen</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>








        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
